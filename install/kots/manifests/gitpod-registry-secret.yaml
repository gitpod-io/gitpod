apiVersion: v1
kind: Secret
metadata:
  name: container-registry
  annotations:
    kots.io/when: '{{repl ConfigOptionEquals "reg_incluster" "0" }}'
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: '{{repl printf "{\"auths\": {\"%s\": {\"username\": \"%s\", \"password\": %s, \"auth\": \"%s\"}}}" (ConfigOption "reg_server" | default (ConfigOption "reg_url")) (ConfigOption "reg_username") (ConfigOption "reg_password" | toJson) (printf "%s:%s" (ConfigOption "reg_username") (ConfigOption "reg_password") | Base64Encode) | Base64Encode }}'
