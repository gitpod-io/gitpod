packages:
  - name: lib
    type: yarn
    srcs:
      - "src/*.ts"
      - "src/*.js"
      - package.json
    config:
      packaging: library
      dontTest: true
      commands:
        build: ["yarn", "build"]
      yarnLock: ${coreYarnLockBase}/../yarn.lock
      tsconfig: tsconfig.json
  - name: publish
    type: generic
    srcs:
      - "scripts/publish.js"
    deps:
      - :lib
    argdeps:
      - version
    config:
      commands:
        - ["node", "scripts/publish.js", "${version}"]
